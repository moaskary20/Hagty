{{-- ุตูุญุฉ ุงููุตูุฑูู ููุตูุฑู ุงูููุฏูู ูู ูุณู ูุฑุญู --}}
<x-filament::page>
    <div class="fi-card mb-6 p-4">
        <h3 class="text-lg font-bold mb-4">ุงููุตูุฑูู ููุตูุฑู ุงูููุฏูู</h3>
        
        <!-- ุฃุฒุฑุงุฑ ุงูุฅุถุงูุฉ -->
        <div class="flex flex-wrap gap-2 justify-end mb-4">
            <button type="button" class="fi-btn bg-pink-700 text-lg px-6 py-2" onclick="showPhotographerForm()">
                + ุฅุถุงูุฉ ูุตูุฑ
            </button>
            <button type="button" class="fi-btn bg-pink-600 text-lg px-6 py-2" onclick="showPackageForm()">
                + ุฅุถุงูุฉ ุจุงูุฉ
            </button>
            <button type="button" class="fi-btn bg-pink-500 text-lg px-6 py-2" onclick="showBannerForm()">
                + ุฅุถุงูุฉ ูุงูุชุฉ
            </button>
            <button type="button" class="fi-btn bg-pink-400 text-lg px-6 py-2" onclick="showVideoForm()">
                + ุฅุถุงูุฉ ุฅุนูุงู ููุฏูู
            </button>
        </div>

        <!-- ุงูุจุญุซ -->
        <form method="GET" class="flex flex-wrap gap-2 mb-4">
            <input type="text" name="search" value="{{ request('search') }}" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ุงูุชุฎุตุต..." class="fi-input w-48">
            <button type="submit" class="fi-btn bg-pink-400">ุจุญุซ</button>
        </form>

        <!-- ุนุฑุถ ุฅุนูุงูุงุช ุงูููุฏูู -->
        @if($videos->count() > 0)
        <div class="mb-6">
            <h4 class="text-base font-bold mb-2">ุฅุนูุงูุงุช ุงูููุฏูู ุจุฑุนุงูุฉ</h4>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                @foreach($videos as $video)
                <div class="bg-gray-800 rounded-lg p-4">
                    <h5 class="font-bold mb-2">{{ $video->title }}</h5>
                    @if($video->is_sponsored)
                        <span class="bg-yellow-500 text-black px-2 py-1 rounded text-xs mb-2 inline-block">ุจุฑุนุงูุฉ</span>
                    @endif
                    <div class="mb-2">
                        <a href="{{ $video->video_url }}" target="_blank" class="text-pink-400 underline">ูุดุงูุฏุฉ ุงูููุฏูู</a>
                    </div>
                    @if($video->photographer)
                        <p class="text-sm text-gray-400">{{ $video->photographer->name }}</p>
                    @endif
                    <p class="text-xs text-gray-500">ุชุฎุทู ุจุนุฏ {{ $video->skip_after_seconds }} ุซุงููุฉ</p>
                    <form method="POST" action="{{ route('wedding-photographers.videos.destroy', $video->id) }}" style="display:inline;" class="mt-2">
                        @csrf
                        @method('DELETE')
                        <button type="submit" class="fi-btn bg-red-600 text-xs py-1 px-2">ุญุฐู</button>
                    </form>
                </div>
                @endforeach
            </div>
        </div>
        @endif

        <!-- ุนุฑุถ ูุงูุชุงุช ุงูุนุฑูุถ -->
        @if($banners->count() > 0)
        <div class="mb-6">
            <h4 class="text-base font-bold mb-2">ูุงูุชุงุช ุงูุนุฑูุถ ูุงูุจุงูุงุช</h4>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                @foreach($banners as $banner)
                <div class="bg-gray-800 rounded-lg p-2">
                    <img src="{{ asset('storage/' . $banner->banner_image) }}" alt="{{ $banner->title }}" class="w-full h-32 object-cover rounded mb-2">
                    <h5 class="font-bold text-sm">{{ $banner->title }}</h5>
                    @if($banner->photographer)
                        <p class="text-xs text-gray-400">{{ $banner->photographer->name }}</p>
                    @endif
                    @if($banner->offer_description)
                        <p class="text-xs text-gray-300 mb-1">{{ Str::limit($banner->offer_description, 50) }}</p>
                    @endif
                    @if($banner->valid_until)
                        <p class="text-xs text-yellow-400">ุตุงูุญ ุญุชู: {{ $banner->valid_until->format('Y-m-d') }}</p>
                    @endif
                    <div class="flex gap-1 mt-2">
                        @if($banner->link_url)
                            <a href="{{ $banner->link_url }}" target="_blank" class="fi-btn bg-blue-600 text-xs py-1 px-2">ุฑุงุจุท</a>
                        @endif
                        <form method="POST" action="{{ route('wedding-photographers.banners.destroy', $banner->id) }}" style="display:inline;">
                            @csrf
                            @method('DELETE')
                            <button type="submit" class="fi-btn bg-red-600 text-xs py-1 px-2">ุญุฐู</button>
                        </form>
                    </div>
                </div>
                @endforeach
            </div>
        </div>
        @endif

        <!-- ุนุฑุถ ุงูุจุงูุงุช -->
        @if($packages->count() > 0)
        <div class="mb-6">
            <h4 class="text-base font-bold mb-2">ุจุงูุงุช ุงูุชุตููุฑ</h4>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                @foreach($packages as $package)
                <div class="bg-gray-800 rounded-lg p-4">
                    <h5 class="font-bold mb-2">{{ $package->name }}</h5>
                    <p class="text-lg text-green-400 font-bold mb-2">{{ number_format($package->price) }} ุฑูุงู</p>
                    @if($package->photographer)
                        <p class="text-sm text-gray-400 mb-2">{{ $package->photographer->name }}</p>
                    @endif
                    @if($package->description)
                        <p class="text-xs text-gray-300 mb-2">{{ Str::limit($package->description, 80) }}</p>
                    @endif
                    <div class="text-xs text-gray-400 mb-2">
                        @if($package->duration_hours)
                            <div>โฑ๏ธ {{ $package->duration_hours }} ุณุงุนุฉ</div>
                        @endif
                        @if($package->edited_photos_count)
                            <div>๐ธ {{ $package->edited_photos_count }} ุตูุฑุฉ ูุนุฏูุฉ</div>
                        @endif
                        @if($package->edited_videos_count)
                            <div>๐ฅ {{ $package->edited_videos_count }} ููุฏูู ูุนุฏู</div>
                        @endif
                        @if($package->includes_album)
                            <div>๐ ุฃูุจูู ูุทุจูุน</div>
                        @endif
                        @if($package->includes_usb)
                            <div>๐พ ููุงุด ููููุฑู</div>
                        @endif
                    </div>
                    <form method="POST" action="{{ route('wedding-photographers.packages.destroy', $package->id) }}" style="display:inline;" class="mt-2">
                        @csrf
                        @method('DELETE')
                        <button type="submit" class="fi-btn bg-red-600 text-xs py-1 px-2">ุญุฐู</button>
                    </form>
                </div>
                @endforeach
            </div>
        </div>
        @endif

        <!-- ููุงุฐุฌ ุงูุฅุถุงูุฉ -->
        
        <!-- ูููุฐุฌ ุฅุถุงูุฉ ูุตูุฑ -->
        <div id="photographerForm" style="display:none;">
            <form method="POST" action="{{ route('wedding-photographers.store') }}" enctype="multipart/form-data" class="flex flex-col gap-2 mb-4 bg-gray-900 p-4 rounded-lg">
                @csrf
                <h4 class="text-lg font-bold mb-2 text-white">ุฅุถุงูุฉ ูุตูุฑ ุฌุฏูุฏ</h4>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                    <input type="text" name="name" placeholder="ุงุณู ุงููุตูุฑ" class="fi-input" required>
                    <select name="specialty" class="fi-input">
                        <option value="">ุงุฎุชุฑ ุงูุชุฎุตุต</option>
                        <option value="ููุชูุบุฑุงูู">ููุชูุบุฑุงูู</option>
                        <option value="ููุฏูู">ููุฏูู</option>
                        <option value="ููุชูุบุฑุงูู ูููุฏูู">ููุชูุบุฑุงูู ูููุฏูู</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                    <input type="email" name="email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" class="fi-input">
                    <input type="number" name="price_range_min" placeholder="ุฃูู ุณุนุฑ" class="fi-input" step="0.01">
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-2">
                    <input type="url" name="website_url" placeholder="ุฑุงุจุท ุงููููุน ุงูุฅููุชุฑููู" class="fi-input">
                    <input type="url" name="instagram_url" placeholder="ุฑุงุจุท ุงูุงูุณุชุบุฑุงู" class="fi-input">
                    <input type="url" name="facebook_url" placeholder="ุฑุงุจุท ุงูููุณุจูู" class="fi-input">
                </div>

                <div id="phone-inputs">
                    <label class="text-white">ุฃุฑูุงู ุงูููุงุชู:</label>
                    <div class="flex gap-2 mb-2">
                        <input type="text" name="phone_numbers[]" placeholder="ุฑูู ุงููุงุชู" class="fi-input">
                        <button type="button" onclick="addPhoneInput()" class="fi-btn bg-green-600 px-3">+</button>
                    </div>
                </div>

                <textarea name="description" placeholder="ูุตู ุงููุตูุฑ ูุฎุจุฑุงุชู" class="fi-input" rows="3"></textarea>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                    <div>
                        <label class="text-white">ุตูุฑ ุงูุฃุนูุงู ุงูุณุงุจูุฉ:</label>
                        <input type="file" name="portfolio_images[]" multiple accept="image/*" class="fi-input">
                    </div>
                    <div>
                        <label class="text-white">ุฑูุงุจุท ููุฏูููุงุช ุงูุฃุนูุงู:</label>
                        <div id="video-urls">
                            <input type="url" name="portfolio_videos[]" placeholder="ุฑุงุจุท ููุฏูู" class="fi-input mb-2">
                            <button type="button" onclick="addVideoUrl()" class="fi-btn bg-green-600 px-3 text-sm">+ ุฅุถุงูุฉ ุฑุงุจุท ููุฏูู</button>
                        </div>
                    </div>
                </div>
                
                <div class="flex gap-2 mt-2">
                    <button type="submit" class="fi-btn bg-pink-600 text-lg py-2 w-full">ุฅุถุงูุฉ</button>
                    <button type="button" onclick="hidePhotographerForm()" class="fi-btn bg-gray-500 w-full">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>

        <!-- ูููุฐุฌ ุฅุถุงูุฉ ุจุงูุฉ -->
        <div id="packageForm" style="display:none;">
            <form method="POST" action="{{ route('wedding-photographers.packages.store') }}" class="flex flex-col gap-2 mb-4 bg-gray-900 p-4 rounded-lg">
                @csrf
                <h4 class="text-lg font-bold mb-2 text-white">ุฅุถุงูุฉ ุจุงูุฉ ุชุตููุฑ</h4>
                
                <select name="photographer_id" class="fi-input" required>
                    <option value="">ุงุฎุชุฑ ุงููุตูุฑ</option>
                    @foreach($photographers as $photographer)
                        <option value="{{ $photographer->id }}">{{ $photographer->name }}</option>
                    @endforeach
                </select>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                    <input type="text" name="name" placeholder="ุงุณู ุงูุจุงูุฉ" class="fi-input" required>
                    <input type="number" name="price" placeholder="ุงูุณุนุฑ" class="fi-input" step="0.01" required>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-2">
                    <input type="number" name="duration_hours" placeholder="ูุฏุฉ ุงูุชุตููุฑ (ุณุงุนุงุช)" class="fi-input" min="1">
                    <input type="number" name="edited_photos_count" placeholder="ุนุฏุฏ ุงูุตูุฑ ุงููุนุฏูุฉ" class="fi-input" min="0">
                    <input type="number" name="edited_videos_count" placeholder="ุนุฏุฏ ุงูููุฏูููุงุช ุงููุนุฏูุฉ" class="fi-input" min="0">
                </div>

                <div class="flex gap-4">
                    <label class="flex items-center text-white">
                        <input type="checkbox" name="includes_album" value="1" class="mr-2">
                        ูุดูู ุฃูุจูู ูุทุจูุน
                    </label>
                    <label class="flex items-center text-white">
                        <input type="checkbox" name="includes_usb" value="1" class="mr-2">
                        ูุดูู ููุงุด ููููุฑู
                    </label>
                </div>

                <textarea name="description" placeholder="ูุตู ุงูุจุงูุฉ" class="fi-input" rows="2"></textarea>

                <div id="services-inputs">
                    <label class="text-white">ุงูุฎุฏูุงุช ุงููุดูููุฉ:</label>
                    <div class="flex gap-2 mb-2">
                        <input type="text" name="included_services[]" placeholder="ุฎุฏูุฉ ูุดูููุฉ" class="fi-input">
                        <button type="button" onclick="addServiceInput()" class="fi-btn bg-green-600 px-3">+</button>
                    </div>
                </div>
                
                <div class="flex gap-2 mt-2">
                    <button type="submit" class="fi-btn bg-pink-600 text-lg py-2 w-full">ุฅุถุงูุฉ ุงูุจุงูุฉ</button>
                    <button type="button" onclick="hidePackageForm()" class="fi-btn bg-gray-500 w-full">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>

        <!-- ูููุฐุฌ ุฅุถุงูุฉ ูุงูุชุฉ -->
        <div id="bannerForm" style="display:none;">
            <form method="POST" action="{{ route('wedding-photographers.banners.store') }}" enctype="multipart/form-data" class="flex flex-col gap-2 mb-4 bg-gray-900 p-4 rounded-lg">
                @csrf
                <h4 class="text-lg font-bold mb-2 text-white">ุฅุถุงูุฉ ูุงูุชุฉ ุนุฑุถ</h4>
                
                <select name="photographer_id" class="fi-input">
                    <option value="">ุงุฎุชูุงุฑู: ุฑุจุท ุจูุตูุฑ ูุนูู</option>
                    @foreach($photographers as $photographer)
                        <option value="{{ $photographer->id }}">{{ $photographer->name }}</option>
                    @endforeach
                </select>
                
                <input type="text" name="title" placeholder="ุนููุงู ุงููุงูุชุฉ" class="fi-input" required>
                <input type="file" name="banner_image" accept="image/*" class="fi-input" required>
                <input type="url" name="link_url" placeholder="ุฑุงุจุท ุนูุฏ ุงูุถุบุท (ุงุฎุชูุงุฑู)" class="fi-input">
                <textarea name="offer_description" placeholder="ูุตู ุงูุนุฑุถ" class="fi-input" rows="2"></textarea>
                <input type="date" name="valid_until" placeholder="ุตุงูุญ ุญุชู ุชุงุฑูุฎ" class="fi-input">
                
                <div class="flex gap-2 mt-2">
                    <button type="submit" class="fi-btn bg-pink-600 text-lg py-2 w-full">ุฅุถุงูุฉ ุงููุงูุชุฉ</button>
                    <button type="button" onclick="hideBannerForm()" class="fi-btn bg-gray-500 w-full">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>

        <!-- ูููุฐุฌ ุฅุถุงูุฉ ุฅุนูุงู ููุฏูู -->
        <div id="videoForm" style="display:none;">
            <form method="POST" action="{{ route('wedding-photographers.videos.store') }}" class="flex flex-col gap-2 mb-4 bg-gray-900 p-4 rounded-lg">
                @csrf
                <h4 class="text-lg font-bold mb-2 text-white">ุฅุถุงูุฉ ุฅุนูุงู ููุฏูู ุจุฑุนุงูุฉ</h4>
                
                <select name="photographer_id" class="fi-input">
                    <option value="">ุงุฎุชูุงุฑู: ุฑุจุท ุจูุตูุฑ ูุนูู</option>
                    @foreach($photographers as $photographer)
                        <option value="{{ $photographer->id }}">{{ $photographer->name }}</option>
                    @endforeach
                </select>
                
                <input type="text" name="title" placeholder="ุนููุงู ุงูููุฏูู" class="fi-input" required>
                <input type="url" name="video_url" placeholder="ุฑุงุจุท ุงูููุฏูู" class="fi-input" required>
                <textarea name="description" placeholder="ูุตู ุงูููุฏูู" class="fi-input" rows="2"></textarea>
                <input type="number" name="skip_after_seconds" placeholder="ููุช ุงูุชุฎุทู ุจุงูุซูุงูู" class="fi-input" value="5" min="1" max="60">
                
                <div class="flex gap-2 mt-2">
                    <button type="submit" class="fi-btn bg-pink-600 text-lg py-2 w-full">ุฅุถุงูุฉ ุงูููุฏูู</button>
                    <button type="button" onclick="hideVideoForm()" class="fi-btn bg-gray-500 w-full">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>

        <!-- ูููุฐุฌ ุชุนุฏูู ูุตูุฑ -->
        <div id="editPhotographerForm" style="display:none;">
            <form id="editForm" method="POST" action="" enctype="multipart/form-data" class="flex flex-col gap-2 mb-4 bg-gray-900 p-4 rounded-lg">
                @csrf
                @method('PUT')
                <h4 class="text-lg font-bold mb-2 text-white">ุชุนุฏูู ุงููุตูุฑ</h4>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                    <input type="text" id="edit_name" name="name" placeholder="ุงุณู ุงููุตูุฑ" class="fi-input" required>
                    <select id="edit_specialty" name="specialty" class="fi-input">
                        <option value="">ุงุฎุชุฑ ุงูุชุฎุตุต</option>
                        <option value="ููุชูุบุฑุงูู">ููุชูุบุฑุงูู</option>
                        <option value="ููุฏูู">ููุฏูู</option>
                        <option value="ููุชูุบุฑุงูู ูููุฏูู">ููุชูุบุฑุงูู ูููุฏูู</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                    <input type="email" id="edit_email" name="email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" class="fi-input">
                    <input type="number" id="edit_price_range_min" name="price_range_min" placeholder="ุฃูู ุณุนุฑ" class="fi-input" step="0.01">
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-2">
                    <input type="url" id="edit_website_url" name="website_url" placeholder="ุฑุงุจุท ุงููููุน ุงูุฅููุชุฑููู" class="fi-input">
                    <input type="url" id="edit_instagram_url" name="instagram_url" placeholder="ุฑุงุจุท ุงูุงูุณุชุบุฑุงู" class="fi-input">
                    <input type="url" id="edit_facebook_url" name="facebook_url" placeholder="ุฑุงุจุท ุงูููุณุจูู" class="fi-input">
                </div>

                <div id="editPhoneContainer">
                    <label class="text-white">ุฃุฑูุงู ุงูููุงุชู:</label>
                    <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฒุก ุจุงูุฌุงูุง ุณูุฑูุจุช -->
                </div>
                <button type="button" onclick="addEditPhoneInput()" class="fi-btn bg-green-600 px-3 w-32">+ ุฅุถุงูุฉ ุฑูู</button>

                <textarea id="edit_description" name="description" placeholder="ูุตู ุงููุตูุฑ ูุฎุจุฑุงุชู" class="fi-input" rows="3"></textarea>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                    <div>
                        <label class="text-white">ุฅุถุงูุฉ ุตูุฑ ุฃุนูุงู ุฌุฏูุฏุฉ:</label>
                        <input type="file" name="portfolio_images[]" multiple accept="image/*" class="fi-input">
                    </div>
                    <div id="editVideoContainer">
                        <label class="text-white">ุฑูุงุจุท ููุฏูููุงุช ุงูุฃุนูุงู:</label>
                        <!-- ุณูุชู ููุก ูุฐุง ุงูุฌุฒุก ุจุงูุฌุงูุง ุณูุฑูุจุช -->
                    </div>
                </div>
                
                <div class="flex gap-2 mt-2">
                    <button type="submit" class="fi-btn bg-blue-600 text-lg py-2 w-full">ุชุญุฏูุซ</button>
                    <button type="button" onclick="hideEditPhotographerForm()" class="fi-btn bg-gray-500 w-full">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>

        <!-- ุฌุฏูู ุงููุตูุฑูู -->
        <div class="mt-8">
            <h4 class="text-base font-bold mb-2">ูุงุฆูุฉ ุงููุตูุฑูู</h4>
            <table class="fi-ta-table w-full text-center">
                <thead>
                    <tr>
                        <th>ุงูุงุณู</th>
                        <th>ุงูุชุฎุตุต</th>
                        <th>ุงูุชูุงุตู</th>
                        <th>ุตูุฑ ุงูุฃุนูุงู</th>
                        <th>ููุฏูููุงุช ุงูุฃุนูุงู</th>
                        <th>ุงููุทุงู ุงูุณุนุฑู</th>
                        <th>ุฅุฌุฑุงุกุงุช</th>
                    </tr>
                </thead>
                <tbody>
                    @forelse($photographers as $photographer)
                    <tr>
                        <td>
                            <div>
                                <strong>{{ $photographer->name }}</strong>
                                @if($photographer->email)
                                    <br><a href="mailto:{{ $photographer->email }}" class="text-pink-400 text-xs underline">{{ $photographer->email }}</a>
                                @endif
                            </div>
                        </td>
                        <td>{{ $photographer->specialty ?: '-' }}</td>
                        <td>
                            @if($photographer->phone_numbers)
                                @foreach($photographer->phone_numbers as $phone)
                                    <div class="text-xs">{{ $phone }}</div>
                                @endforeach
                            @endif
                            <div class="flex gap-1 justify-center mt-1">
                                @if($photographer->website_url)
                                    <a href="{{ $photographer->website_url }}" target="_blank" class="text-blue-400 text-xs">๐</a>
                                @endif
                                @if($photographer->instagram_url)
                                    <a href="{{ $photographer->instagram_url }}" target="_blank" class="text-pink-400 text-xs">๐ท</a>
                                @endif
                                @if($photographer->facebook_url)
                                    <a href="{{ $photographer->facebook_url }}" target="_blank" class="text-blue-600 text-xs">๐</a>
                                @endif
                            </div>
                        </td>
                        <td>
                            @if($photographer->portfolio_images && count($photographer->portfolio_images) > 0)
                                <div class="flex flex-wrap gap-1 justify-center">
                                    @foreach(array_slice($photographer->portfolio_images, 0, 3) as $index => $image)
                                        <img src="{{ asset('storage/' . $image) }}" alt="ุนูู" class="w-12 h-12 object-cover rounded cursor-pointer" onclick="showImageModal('{{ asset('storage/' . $image) }}', 'ุฃุนูุงู {{ $photographer->name }}')">
                                    @endforeach
                                    @if(count($photographer->portfolio_images) > 3)
                                        <span class="text-xs bg-gray-600 px-2 py-1 rounded">+{{ count($photographer->portfolio_images) - 3 }}</span>
                                    @endif
                                </div>
                            @else
                                <span class="text-gray-400">ูุง ุชูุฌุฏ</span>
                            @endif
                        </td>
                        <td>
                            @if($photographer->portfolio_videos && count($photographer->portfolio_videos) > 0)
                                <div class="flex flex-col gap-1">
                                    @foreach(array_slice($photographer->portfolio_videos, 0, 2) as $video)
                                        <a href="{{ $video }}" target="_blank" class="text-pink-400 text-xs underline">๐ฅ ููุฏูู</a>
                                    @endforeach
                                    @if(count($photographer->portfolio_videos) > 2)
                                        <span class="text-xs text-gray-400">+{{ count($photographer->portfolio_videos) - 2 }} ุฃุฎุฑู</span>
                                    @endif
                                </div>
                            @else
                                <span class="text-gray-400">ูุง ุชูุฌุฏ</span>
                            @endif
                        </td>
                        <td>
                            @if($photographer->price_range_min)
                                <div class="text-xs">ูู {{ number_format($photographer->price_range_min) }} ุฑูุงู</div>
                            @else
                                -
                            @endif
                        </td>
                        <td>
                            <div class="flex flex-col gap-1">
                                <button type="button" onclick="editPhotographer({{ $photographer->id }})" class="fi-btn bg-blue-600 text-xs py-1 px-2">ุชุนุฏูู</button>
                                <form method="POST" action="{{ route('wedding-photographers.destroy', $photographer->id) }}" style="display:inline;">
                                    @csrf
                                    @method('DELETE')
                                    <button type="submit" class="fi-btn bg-red-600 text-xs py-1 px-2" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุงูุญุฐูุ')">ุญุฐู</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                    @empty
                    <tr>
                        <td colspan="7" class="text-center text-gray-400 py-4">ูุง ููุฌุฏ ูุตูุฑูู ูุณุฌููู</td>
                    </tr>
                    @endforelse
                </tbody>
            </table>
        </div>

        <!-- ูุงูุฐุฉ ููุจุซูุฉ ูุนุฑุถ ุงูุตูุฑ -->
        <div id="imageModal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50" onclick="hideImageModal()">
            <div class="max-w-4xl max-h-screen p-4">
                <img id="modalImage" src="" alt="" class="max-w-full max-h-full object-contain">
                <p id="modalTitle" class="text-white text-center mt-2"></p>
            </div>
        </div>
    </div>

    <script>
        // ุฏูุงู ุฅุธูุงุฑ ูุฅุฎูุงุก ุงูููุงุฐุฌ
        function showPhotographerForm() {
            hideAllForms();
            document.getElementById('photographerForm').style.display = 'block';
        }
        function hidePhotographerForm() {
            document.getElementById('photographerForm').style.display = 'none';
        }
        
        function showPackageForm() {
            hideAllForms();
            document.getElementById('packageForm').style.display = 'block';
        }
        function hidePackageForm() {
            document.getElementById('packageForm').style.display = 'none';
        }
        
        function showBannerForm() {
            hideAllForms();
            document.getElementById('bannerForm').style.display = 'block';
        }
        function hideBannerForm() {
            document.getElementById('bannerForm').style.display = 'none';
        }
        
        function showVideoForm() {
            hideAllForms();
            document.getElementById('videoForm').style.display = 'block';
        }
        function hideVideoForm() {
            document.getElementById('videoForm').style.display = 'none';
        }
        
        function showEditPhotographerForm() {
            document.getElementById('editPhotographerForm').style.display = 'block';
        }
        function hideEditPhotographerForm() {
            document.getElementById('editPhotographerForm').style.display = 'none';
        }
        
        function hideAllForms() {
            hidePhotographerForm();
            hidePackageForm();
            hideBannerForm();
            hideVideoForm();
            hideEditPhotographerForm();
        }

        // ุฏูุงู ุฅุถุงูุฉ ุญููู ุฏููุงููููุฉ
        function addPhoneInput() {
            const container = document.getElementById('phone-inputs');
            const div = document.createElement('div');
            div.className = 'flex gap-2 mb-2';
            div.innerHTML = '<input type="text" name="phone_numbers[]" placeholder="ุฑูู ุงููุงุชู" class="fi-input"><button type="button" onclick="removePhoneInput(this)" class="fi-btn bg-red-600 px-3">-</button>';
            container.appendChild(div);
        }
        function removePhoneInput(button) {
            button.parentElement.remove();
        }

        function addVideoUrl() {
            const container = document.getElementById('video-urls');
            const input = document.createElement('input');
            input.type = 'url';
            input.name = 'portfolio_videos[]';
            input.placeholder = 'ุฑุงุจุท ููุฏูู';
            input.className = 'fi-input mb-2';
            container.insertBefore(input, container.lastElementChild);
        }

        function addServiceInput() {
            const container = document.getElementById('services-inputs');
            const div = document.createElement('div');
            div.className = 'flex gap-2 mb-2';
            div.innerHTML = '<input type="text" name="included_services[]" placeholder="ุฎุฏูุฉ ูุดูููุฉ" class="fi-input"><button type="button" onclick="removeServiceInput(this)" class="fi-btn bg-red-600 px-3">-</button>';
            container.appendChild(div);
        }
        function removeServiceInput(button) {
            button.parentElement.remove();
        }

        // ุฏูุงู ุงูุชุนุฏูู
        function editPhotographer(photographerId) {
            hideAllForms();
            
            const photographers = @json($photographers);
            const photographer = photographers.find(p => p.id === photographerId);
            
            if (photographer) {
                // ููุก ุงูุญููู
                document.getElementById('edit_name').value = photographer.name || '';
                document.getElementById('edit_specialty').value = photographer.specialty || '';
                document.getElementById('edit_email').value = photographer.email || '';
                document.getElementById('edit_price_range_min').value = photographer.price_range_min || '';
                document.getElementById('edit_website_url').value = photographer.website_url || '';
                document.getElementById('edit_instagram_url').value = photographer.instagram_url || '';
                document.getElementById('edit_facebook_url').value = photographer.facebook_url || '';
                document.getElementById('edit_description').value = photographer.description || '';
                
                // ุชุญุฏูุซ action ุงูููุฑู
                document.getElementById('editForm').action = `/wedding-photographers/${photographerId}`;
                
                // ููุก ุฃุฑูุงู ุงูููุงุชู
                const phoneContainer = document.getElementById('editPhoneContainer');
                phoneContainer.innerHTML = '<label class="text-white">ุฃุฑูุงู ุงูููุงุชู:</label>';
                if (photographer.phone_numbers && photographer.phone_numbers.length > 0) {
                    photographer.phone_numbers.forEach(phone => {
                        addEditPhoneInput(phone);
                    });
                } else {
                    addEditPhoneInput();
                }
                
                // ููุก ุฑูุงุจุท ุงูููุฏูููุงุช
                const videoContainer = document.getElementById('editVideoContainer');
                videoContainer.innerHTML = '<label class="text-white">ุฑูุงุจุท ููุฏูููุงุช ุงูุฃุนูุงู:</label>';
                if (photographer.portfolio_videos && photographer.portfolio_videos.length > 0) {
                    photographer.portfolio_videos.forEach(video => {
                        addEditVideoInput(video);
                    });
                } else {
                    addEditVideoInput();
                }
                
                showEditPhotographerForm();
            }
        }
        
        function addEditPhoneInput(value = '') {
            const container = document.getElementById('editPhoneContainer');
            const div = document.createElement('div');
            div.className = 'flex gap-2 mb-2';
            div.innerHTML = `<input type="text" name="phone_numbers[]" value="${value}" placeholder="ุฑูู ุงููุงุชู" class="fi-input"><button type="button" onclick="removeEditPhoneInput(this)" class="fi-btn bg-red-600 px-3">-</button>`;
            container.appendChild(div);
        }
        
        function removeEditPhoneInput(button) {
            button.parentElement.remove();
        }
        
        function addEditVideoInput(value = '') {
            const container = document.getElementById('editVideoContainer');
            const div = document.createElement('div');
            div.className = 'flex gap-2 mb-2';
            div.innerHTML = `<input type="url" name="portfolio_videos[]" value="${value}" placeholder="ุฑุงุจุท ููุฏูู" class="fi-input"><button type="button" onclick="removeEditVideoInput(this)" class="fi-btn bg-red-600 px-3">-</button>`;
            container.appendChild(div);
        }
        
        function removeEditVideoInput(button) {
            button.parentElement.remove();
        }
        
        // ุฏูุงู ุนุฑุถ ุงูุตูุฑ
        function showImageModal(imageSrc, title) {
            document.getElementById('modalImage').src = imageSrc;
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('imageModal').classList.remove('hidden');
        }
        
        function hideImageModal() {
            document.getElementById('imageModal').classList.add('hidden');
        }
    </script>
</x-filament::page>
